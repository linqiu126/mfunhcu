<?php
header("Content-type:text/html;charset=utf-8");
require '/php/req.php';
function _encode($arr)
{
  $na = array();
  foreach ( $arr as $k => $value ) {   
    $na[_urlencode($k)] = _urlencode ($value);   
  }
  return addcslashes(urldecode(json_encode($na)),"\r\n");
}
 
function _urlencode($elem)
{
  if(is_array($elem)){
    foreach($elem as $k=>$v){
      $na[_urlencode($k)] = _urlencode($v);
    }
    return $na;
  }
  return urlencode($elem);
}

$key=$_GET["action"];
//echo $key;
switch ($key){
case "login":
//login message:
//require data structure:
        //var map={
        //    action:"login",
        //    name:$("#Username_Input").val(),
        //    password:$("#Password_Input").val()
        //};
//return data structure:
        //usrinfo={
        //  status:"true",
        //  text:"login successfully",
        //  key: "1234567",
        //  admin: "true"
        //};
$usr = $_GET["name"];
$usrinfo;
	if($usr == "admin"){
		$usrinfo=array(
        'status'=>'true',
        'text'=>'login successfully',
        'key'=> '1234567',
        'admin'=> 'true'
		);
    }else if($usr=="user"){
        $usrinfo=array(
        'status'=>'true',
        'text'=>'login successfully',
        'key'=> '7654321',
        'admin'=> 'false'
		);
    }else{
        $usrinfo=array(
        'status'=>'false',
        'text'=>'no this user or password faile',
        'key'=> '',
        'admin'=> ''
		);
    }
    $jsonencode = json_encode($usrinfo);
	echo $jsonencode; break;

		
case "UserInfo":
// get User Information after login
//require data structure:
        /*var map={
                action:"UserInfo",
                session: session
                };*/
//return data structure:
        /*var user = {
                    id:1234567,
                    name:"admin",
                    admin:true,
                    city: "Ϻ"
                }*/
				//echo $key;
	$session = $_GET["session"];
    $user=null;
    if($session == "1234567"){
        $user = array(
			'id'=> '1234567',
			'name'=> 'admin',
            'admin'=> 'true',
            'city'=> urlencode("Ϻ")
		);
    }
    if($session == "7654321"){
        $user = array(
            'id'=>'7654321',
            'name'=>'user',
            'admin'=>'false',
            'city'=>urlencode("Ϻ")
        );
    }
    $retstatus = 'true';
    if($user==null) $retstatus = 'false';
	echo urlencode("Ϻ").(urldecode(urlencode("Ϻ")));
    $retval=array(
		'status'=>$retstatus,
		'ret'=>($user)
	);
    $jsonencode = urldecode(json_encode($retval));
	echo $jsonencode; 
	break;
case "ProjectPGList":
//Get the Project & Project Group list which will be use in user auth
//require data structure:
        /*var map={
                  action:"ProjectPGList",
                  user:usr.id
              };*/
//return data structure:
        /*var temp = {
          id: (i),
          name: "Ŀ"+i
          }
          proj_pg_list.push(temp);
          var retval={
          status:"true",
          ret: proj_pg_list
          };
          */
    $proj_pg_list=array();
	for($i=0;$i<14;$i++){
		$temp = array(
			'id'=>(string)$i,
			'name'=>'Ŀ'.(string)$i
		);
		array_push($proj_pg_list,$temp);
	}
	for($i=0;$i<4;$i++){
		$temp = array(
			'id'=>"x".(string)($i),
			'name'=>"Ŀ".(string)($i)
		);
		array_push($proj_pg_list,$temp);
	}
	$retval=array(
		'status'=>'true',
		'ret'=>$proj_pg_list
	);
	$jsonencode = json_encode($retval);
	echo $jsonencode; break;

case "ProjectList":
//Get the Project list
//require data structure:
        /*var map={
                  action:"ProjectList",
                  user:usr.id
              };*/
//return data structure:
/*          var temp = {
                id: (i),
                name: "Ŀ"+i
            }
            projlist.push(temp);
            var retval={
                status:"true",
                ret: projlist
            };*/
	$projlist = array();
	for($i=0;$i<14;$i++){
		$temp = array(
			'id'=> (string)($i),
			'name'=> "Ŀ".(string)$i
		);
		array_push($projlist,$temp);
	}
	$retval=array(
		'status'=>'true',
		'ret'=> $projlist
	);
	$jsonencode = json_encode($retval);
	echo $jsonencode; break;

case "UserNew":
// new user
//require data structure:
/*var map={
        action:"UserNew",
        name: user.name,
        nickname: user.nickname,
        password: user.password,
        mobile: user.mobile,
        mail: user.mail,
        type: user.type,
        memo: user.memo,
        auth: auth
    };*/
//return data structure:
/*  var retval={
       status:"true",
       msg:""
    };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;

case "UserMod":
// modify user
//require data structure:
/*var map={
        action:"UserMod",
        id: user.id,
        name: user.name,
        nickname: user.nickname,
        password: user.password,
        mobile: user.mobile,
        mail: user.mail,
        type: user.type,
        memo: user.memo,
        auth: auth
    };*/
//return data structure:
/*  var retval={
       status:"true",
       msg:""
    };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "UserDel":
// modify user
//require data structure:
/*var map={
        action:"UserDel",
        id: id
    };*/
//return data structure:
/*  var retval={
       status:"true",
       msg:""
    };*/
$retval=array(
                'status'=>'true',
                'msg'=>''
            );
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "UserTable":
// query user table
//require data structure:
/*var map={
        action:"UserTable",
        startseq: start,
        length:length
    };
 //return data structure:
      /*  var temp = {
                              id: (start+(i+1)),
                              name: "username"+(start+i),
                              nickname: "û"+(start+i),
                              mobile: "139139"+(start+i),
                              mail: "139139"+(start+i)+"@cmcc.com",
                              type: type,
                              date: "2016-01-01 12:12:12",
                              memo: "ע"+(start+i)
                          }
                          usertable.push(temp);


                          var retval={
                                          status:"true",
                                          start: start,
                                          total: total,
                                          length:query_length,
                                          ret: usertable
                                      };*/
	$total = 94;
    $query_length = (int)($_GET['length']);
    $start = (int)($_GET['startseq']);
    if($query_length> $total-$start){$query_length = $total-$start;}
    $usertable = array();
    for($i=0;$i<$query_length;$i++){
        $type=FALSE;
        if(($i%7)==0) $type= true;
		$temp = array(
			'id'=>(string)($start+($i+1)),
			'name'=>"username".(string)($start+$i),
			'nickname'=>"û".(string)($start+$i),
			'mobile'=>"139139".(string)($start+$i),
			'mail'=>"139139".(string)($start+$i)."@cmcc.com",
			'type'=>(string)$type,
			'date'=>"2016-01-01 12:12:12",
			'memo'=>"ע".(string)($start+$i)
		);
		array_push($usertable,$temp);
    }
	$retval=array(
		'status'=>'true',
		'start'=> (string)$start,
		'total'=> (string)$total,
		'length'=>(string)$query_length,
		'ret'=> $usertable
	);
	$jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "UserProj":
// query project list belong to one user
//require data structure:
/*      var map={
          action:"UserProj",
          userid: user
      };
 //return data structure:
        var temp = {
                     id: (i+1),
                     name: "Ŀ"+i
                 }
                 userproj.push(temp);
                 var retval={
                                 status:"true",
                                 ret: userproj
                             };*/
							 
	$userproj = array();
	for($i=0;$i<4;$i++){
		$temp = array(
			$id=>(string)($i+1),
			$name=>"Ŀ".(string)$i
		);
		array_push($userproj,$temp);
	}
	$retval= array(
		'status'=>"true",
		'ret'=>$userproj
	);
	$jsonencode = json_encode($retval);
	echo $jsonencode; break;

case "PGTable":
// query project group table
//require data structure:
/*      var map={
        action:"PGTable",
        startseq: start,
        length:length,
        user:usr.id
    };
 //return data structure:
 var temp = {
                     PGCode: (start+(i+1)),
                     PGName:"Ŀ"+(start+i),
                     ChargeMan:"û"+(start+i),
                     Telephone:"139139"+(start+i),
                     Department:"λ"+(start+i),
                     Address:"ַ"+(start+i),
                     Stage:"ע"+(start+i)
                 };
                 pgtable.push(temp);
                 var retval={
                                 status:"true",
                                 start: start,
                                 total: total,
                                 length:query_length,
                                 ret: pgtable
                             };*/
	$total = 14;
    $query_length = (int)($_GET['length']);
    $start = (int)($_GET['startseq']);
    if($query_length> $total-$start){$query_length = $total-$start;}
	$pgtable = array();
	for($i=0;$i<$query_length;$i++){
		$temp = array(
			'PGCode'=>(string)(start+(i+1)),
			'PGName'=>"Ŀ".(string)(start+i),
			'ChargeMan'=>"û".(string)(start+i),
			'Telephone'=>"139139".(string)(start+i),
			'Department'=>"λ".(string)(start+i),
			'Address'=>"ַ".(string)(start+i),
			'Stage'=>"ע".(string)(start+i)
		);
		array_push($pgtable,$temp);
	}
	$retval=array(
		'status'=>'true',
		'start'=> (string)$start,
		'total'=> (string)$total,
		'length'=>(string)$query_length,
		'ret'=> $pgtable
	);
	$jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "PGNew":
//create a new project group
//require data structure:
/*      var map={
                action:"PGNew",
                PGCode: pg.PGCode,
                PGName:pg.PGName,
                ChargeMan:pg.ChargeMan,
                Telephone:pg.Telephone,
                Department:pg.Department,
                Address:pg.Address,
                Stage:pg.Stage,
                Projlist: projlist,
                user:usr.id
            };
 //return data structure:

var retval={
                status:"true",
                msg:""
            };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;

case "PGMod":
//modify project group
//require data structure:
/*      var map={
                action:"PGMod",
                PGCode: pg.PGCode,
                PGName:pg.PGName,
                ChargeMan:pg.ChargeMan,
                Telephone:pg.Telephone,
                Department:pg.Department,
                Address:pg.Address,
                Stage:pg.Stage,
                Projlist: projlist,
                user:usr.id
            };
 //return data structure:

var retval={
                status:"true",
                msg:""
            };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "PGDel":
//delete project group
             //require data structure:
             /*
var map={
        action:"PGDel",
        id: id,
        user:usr.id
    };
     //return data structure:

    var retval={
                    status:"true",
                    msg:""
                };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "PGProj":
// query project list belong to one project group
//require data structure:
/*var map={
        action:"PGProj",
        id: pgid
    };
//return data structure:
    var temp = {
    id: (i+1),
    name: "Ŀ"+i
    }
    PGProj.push(temp);
    var retval={
    status:"true",
    ret: PGProj
}*/
	$PGProj = array();
	for($i=0;$i<4;$i++){
		$temp = array(
			'id'=> (string)($i+1),
			'name'=> "Ŀ".(string)$i
		);
		array_push($PGProj,$temp);
	}
	$retval=array(
		'status'=>'true',
		'ret'=> $PGProj
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "ProjTable":
// query project table
//require data structure:
/*
var map={
        action:"ProjTable",
        startseq: start,
        length:length,
        user:usr.id
    };

//return data structure:
    var temp = {
    ProjCode: (start+(i+1)),
    ProjName:"Ŀ"+(start+i),
    ChargeMan:"û"+(start+i),
     Telephone:"139139"+(start+i),
      Department:"λ"+(start+i),
      Address:"ַ"+(start+i),
      ProStartTime:"2016-01-01",
       Stage:"ע"+(start+i)
    };
    projtable.push(temp);

    var retval={
                    status:"true",
                    start: start,
                    total: total,
                    length:query_length,
                    ret: projtable
                };*/
	$total = 14;
    $query_length = (int)($_GET['length']);
    $start = (int)($_GET['startseq']);
    if($query_length> $total-$start){$query_length = $total-$start;}
    $projtable = array();
    for($i=0;$i<$query_length;$i++){
		$temp = array(
			'ProjCode'=> (string)($start+($i+1)),
			'ProjName'=>"Ŀ".(string)($start+$i),
			'ChargeMan'=>"û".(string)($start+$i),
			'Telephone'=>"139139".(string)($start+$i),
			'Department'=>"λ".(string)($start+$i),
			'Address'=>"ַ".(string)($start+$i),
			'ProStartTime'=>"2016-01-01",
			'Stage'=>"ע".(string)($start+$i)
		);
		array_push($projtable,$temp);
	}
	$retval=array(
		'status'=>'true',
		'start'=> (string)$start,
		'total'=> (string)$total,
		'length'=>(string)$query_length,
		'ret'=> $projtable
	);
	$jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "ProjNew":
// create a new project
//require data structure:
/*
var map={
        action:"ProjNew",
        ProjCode: project.ProjCode,
        ProjName:project.ProjName,
        ChargeMan:project.ChargeMan,
        Telephone:project.Telephone,
        Department:project.Department,
        Address:project.Address,
        ProStartTime:project.ProStartTime,
        Stage:project.Stage,
        user:usr.id
    };
//return data structure:
var retval={
                status:"true",
                msg:""
            };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "ProjMod":
// modify project
//require data structure:
/*
var map={
        action:"ProjMod",
        ProjCode: project.ProjCode,
        ProjName:project.ProjName,
        ChargeMan:project.ChargeMan,
        Telephone:project.Telephone,
        Department:project.Department,
        Address:project.Address,
        ProStartTime:project.ProStartTime,
        Stage:project.Stage,
        user:usr.id
    };
//return data structure:
var retval={
                status:"true",
                msg:""
            };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "ProjDel":
//delete a project
             //require data structure:
             /*
var map={
        action:"ProjDel",
        StatCode: StatCode,
        user:usr.id
    };
    //return data structure:
    var retval={
                    status:"true",
                    msg:""
                };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "ProjPoint":
//get Monitor Point under a proj
             //require data structure:
             /*
var map={
        action:"ProjPoint",
        ProjCode: ProjCode
    };
    //return data structure:
 var temp = {
                    id: i+1,
                    name: "۲"+(i+1),
                    ProjCode: projcode
                }
                ProjPoint.push(temp);
var retval={
                status:"true",
                ret: ProjPoint
            };    */
	$ProjPoint = array();
	for($i=0;$i<40;$i++){
		$projcode = ($i)%14;
		$temp = array(
			'id'=> (string)($i+1),
			'name'=> "۲".(string)($i+1),
			'ProjCode'=> $projcode
		);
		array_push($ProjPoint,$temp);
	}
	$retval=array(
		'status'=>'true',
		'ret'=> $ProjPoint
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;

case "PointProj":
//abandon
break;
case "PointTable":
// query project table
//require data structure:
/*
var map={
        action:"PointTable",
        startseq: start,
        length:length,
        user:usr.id
    };
    };
    //return data structure:
var temp = {
                    StatCode: (start+(i+1)),
                    StatName:""+(start+i),
                    ProjCode: projcode,
                    ChargeMan:"û"+(start+i),
                    Telephone:"139139"+(start+i),
                    Longitude:"121.0000",
                    Latitude:"31.0000",
                    Department:"λ"+(start+i),
                    Address:"ַ"+(start+i),
                    Country:""+(start+i),
                    Street:""+(start+i),
                    Square:"10000",
                    ProStartTime:"2016-01-01",
                    Stage:"ע"+(start+i)
                };
                projtable.push(temp);
var retval={
                status:"true",
                start: start,
                total: total,
                length:query_length,
                ret: projtable
            };*/
	$total = 40;
    $query_length = (int)($_GET['length']);
    $start = (int)($_GET['startseq']);
    if($query_length> $total-$start){$query_length = $total-$start;}
    $pointtable = array();
	for($i=0;$i<$query_length;$i++){
		
	$projcode = ($start+$i)%14;
		$temp = array(
			'StatCode'=> (string)($start+($i+1)),
			'StatName'=>"".(string)($start+$i),
			'ProjCode'=> $projcode,
			'ChargeMan'=>"û".(string)($start+$i),
			'Telephone'=>"139139".(string)($start+$i),
			'Longitude'=>"121.0000",
			'Latitude'=>"31.0000",
			'Department'=>"λ".(string)($start+$i),
			'Address'=>"ַ".(string)($start+$i),
			'Country'=>"".(string)($start+$i),
			'Street'=>"".(string)($start+$i),
			'Square'=>"10000",
			'ProStartTime'=>"2016-01-01",
			'Stage'=>"ע".(string)($start+$i)
		);
		array_push($pointtable,$temp);
	}
	$retval=array(
		'status'=>'true',
		'start'=> (string)$start,
		'total'=> (string)$total,
		'length'=>(string)$query_length,
		'ret'=> $pointtable
	);
	$jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "PointDetail":
//abandon
break;
case "PointNew":
// create a new monitor point
//require data structure:
/*var map={
          action:"PointNew",
          StatCode: point.StatCode,
          StatName:point.StatName,
          ProjCode: point.ProjCode,
          ChargeMan:point.ChargeMan,
          Telephone:point.Telephone,
          Longitude:point.Longitude,
          Latitude:point.Latitude,
          Department:point.Department,
          Address:point.Address,
          Country:point.Country,
          Street:point.Street,
          Square:point.Square,
          ProStartTime:point.ProStartTime,
          Stage:point.Stage,
          user:usr.id
      };
//return data structure:
var retval={
                status:"true",
                msg:""
            };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "PointMod":
// modify a new monitor point
//require data structure:
/*var map={
          action:"PointMod",
          StatCode: point.StatCode,
          StatName:point.StatName,
          ProjCode: point.ProjCode,
          ChargeMan:point.ChargeMan,
          Telephone:point.Telephone,
          Longitude:point.Longitude,
          Latitude:point.Latitude,
          Department:point.Department,
          Address:point.Address,
          Country:point.Country,
          Street:point.Street,
          Square:point.Square,
          ProStartTime:point.ProStartTime,
          Stage:point.Stage,
          user:usr.id
      };
//return data structure:
var retval={
                status:"true",
                msg:""
            };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "PointDel":
//delete a Monitor point
//require data structure:
/*
var map={
        action:"PointDel",
        StatCode: StatCode,
        user:usr.id
    };
    //return data structure:
    var retval={
                    status:"true",
                    msg:""
                };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "PointDev":
//get Dev list  under a monitor point
             //require data structure:
             /*
var map={
        action:"PointDev",
        StatCode: StatCode
    };
    //return data structure:
var temp = {
                    id: (i+1),
                    name: "豸"+i
                }
                projdev.push(temp);
var retval={
                status:"true",
                ret: projdev
            };*/
case "DevTable":
// query device table
//require data structure:
/*
var map={
        action:"DevTable",
        startseq: start,
        length:length,
        user:usr.id
    };
//return data structure:
var temp = {
                    //豸 DevCode
                    // StatCode
                    //װʱ StartTime
                    //Ԥƽʱ PreEndTime
                    //ʵʽʱ EndTime
                    //豸Ƿ DevStatus
                    //Ƶַ VideoURL
                    DevCode: (start+(i+1)),
                    StatCode:statcode,
                    ProjCode: projcode,
                    StartTime:"2016-01-01",
                    PreEndTime:"2017-01-01",
                    EndTime:"2099-12-31",
                    DevStatus:true,
                    VideoURL:"www.tokoyhot.com"
                };
                projtable.push(temp);
                var retval={
                                status:"true",
                                start: start,
                                total: total,
                                length:query_length,
                                ret: projtable
                            };*/
	$total = 204;
    $query_length = (int)($_GET['length']);
    $start = (int)($_GET['startseq']);
    if($query_length> $total-$start){$query_length = $total-$start;}
    $devtable = array();
	for($i=0;$i<$query_length;$i++){
		$statcode = ($start+$i+1)%40;
		$projcode = ($statcode-1)%14;
		$temp = array(
			'DevCode'=> (string)($start+($i+1)),
			'StatCode'=> $statcode,
			'ProjCode'=> $projcode,
			'StartTime'=>"2016-01-01",
			'PreEndTime'=>"2017-01-01",
			'EndTime'=>"2099-12-31",
			'DevStatus'=>'true',
			'VideoURL'=>"www.tokoyhot.com"
		);
		array_push($devtable,$temp);
	}
	$retval=array(
		'status'=>'true',
		'start'=> (string)$start,
		'total'=> (string)$total,
		'length'=>(string)$query_length,
		'ret'=> $devtable
	);
	$jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "DevNew":
// create a new device
//require data structure:
/*var map={
          action:"DevNew",
          DevCode: device.DevCode,
          StatCode:device.StatCode,
          StartTime:device.StartTime,
          PreEndTime:device.PreEndTime,
          EndTime:device.EndTime,
          DevStatus:device.DevStatus,
          VideoURL:device.VideoURL,
          user:usr.id
      };
//return data structure:
            var retval={
                            status:"true",
                            msg:""
                        };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "DevMod":
// modify a  device
//require data structure:
/*var map={
          action:"DevMod",
          DevCode: device.DevCode,
          StatCode:device.StatCode,
          StartTime:device.StartTime,
          PreEndTime:device.PreEndTime,
          EndTime:device.EndTime,
          DevStatus:device.DevStatus,
          VideoURL:device.VideoURL,
          user:usr.id
      };
//return data structure:
            var retval={
                            status:"true",
                            msg:""
                        };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "DevDel":
// delete a  device
//require data structure:
/*
var map={
        action:"DevDel",
        StatCode: DevCode,
        user:usr.id
    };
//return data structure:
            var retval={
                            status:"true",
                            msg:""
                        };*/
	$retval=array(
		'status'=>'true',
		'msg'=>''
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "DevAlarm":
// get last alarm by a device on map
//require data structure:
/*
var map={
            action:"DevAlarm",
            StatCode: monitor_selected.StatCode
        };
//return data structure:
var map1 = {
                AlarmName: "",
                AlarmValue:GetRandomNum(10,110),
                AlarmUnit:"DB",
                WarningTarget:65
            };
            alarmlist.push(map1);
            var retval={
                            status:"true",
                            ret:alarmlist
                        };*/
	$devcode =$_GET["DevCode"];
	$alarmlist= array();
	$map1 = array(
		'AlarmName'=>"",
		'AlarmValue'=>(string)rand(10,110),
		'AlarmUnit'=>"DB",
		'WarningTarget'=>'65'
	);
	array_push($alarmlist,$map1);
	$map2 = array(
		'AlarmName'=>"ﳾ",
		'AlarmValue'=>(string)rand(1,100),
		'AlarmUnit'=>"mg/m3",
		'WarningTarget'=>'65'
	);
	array_push($alarmlist,$map2);
	$map3 = array(
		'AlarmName'=>"ʪ",
		'AlarmValue'=>(string)rand(1,100),
		'AlarmUnit'=>"%",
		'WarningTarget'=>'65'
	);
	array_push($alarmlist,$map3);
	$map4 = array(
		'AlarmName'=>"¶",
		'AlarmValue'=>(string)rand(10,50),
		'AlarmUnit'=>"C",
		'WarningTarget'=>'37'
	);
	array_push($alarmlist,$map4);
	$map5 = array(
		'AlarmName'=>"ϸ",
		'AlarmValue'=>(string)rand(10,400),
		'AlarmUnit'=>"ug/m3",
		'WarningTarget'=>'300'
	);
	array_push($alarmlist,$map5);
	$map6 = array(
		'AlarmName'=>"ˮ",
		'AlarmValue'=>(string)rand(10,150),
		'AlarmUnit'=>"Ⱥ",
		'WarningTarget'=>'100'
	);
	array_push($alarmlist,$map6);
	$map7 = array(
		'AlarmName'=>"SO2",
		'AlarmValue'=>(string)rand(10,30),
		'AlarmUnit'=>"ug/L",
		'WarningTarget'=>'20'
	);
	array_push($alarmlist,$map7);
	$map8 = array(
		'AlarmName'=>"",
		'AlarmValue'=>(string)rand(10,150),
		'AlarmUnit'=>"km/h",
		'WarningTarget'=>'60'
	);
	array_push($alarmlist,$map8);

	$retval=array(
		'status'=>'true',
		'ret'=> $alarmlist
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "MonitorList":
// get monitorList in map by user id
//require data structure:
/*
var map={
        action:"MonitorList",
        id: usr.id
    };
    //return data structure:
    var map18={
                    StatCode:"120101020",
                    StatName:"ٸ۳Ͷ",
                    ChargeMan:"",
                    Telephone:"13912345678",
                    Department:"",
                    Address:"һ·333",
                    Country:"ֶ",
                    Street:"",
                    Square:"0",
                    Flag_la:"N",
                    Latitude:"30.900796",
                    Flag_lo:"E",
                    Longitude:"121.933166",
                    ProStartTime:"2015-11-30",
                    Stage:""
                };
                stat_list.push(map18);
                var retval={
                    status:"true",
                    id: userid,
                    ret: stat_list
                };*/
	$userid = $_GET["id"];
	$stat_list = array();
	$map1=array(
		'StatCode'=>"120101001",
		'StatName'=>"ֶĹ",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"ʹ100",
		'Country'=>"ֶ",
		'Street'=>"",
		'Square'=>"40000",
		'Flag_la'=>"N",
		'Latitude'=>"31.240246",
		'Flag_lo'=>"E",
		'Longitude'=>"121.514168",
		'ProStartTime'=>"2015-01-01",
		'Stage'=>""
	);
	array_push($stat_list,$map1);
	$map2=array(

		'StatCode'=>"120101002",
		'StatName'=>"˴",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"·1963Ū24",
		'Country'=>"",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.255719",
		'Flag_lo'=>"E",
		'Longitude'=>"121.517700",
		'ProStartTime'=>"2016-04-01",
		'Stage'=>""
	);
	array_push($stat_list,$map1);
	$map3= array(

		'StatCode'=>"120101003",
		'StatName'=>"򱦹ʹ㳡",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"Ӱ·500",
		'Country'=>"",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.223441",
		'Flag_lo'=>"E",
		'Longitude'=>"121.442703",
		'ProStartTime'=>"2016-04-01",
		'Stage'=>""
	);
	array_push($stat_list,$map3);
	$map4= array(

		'StatCode'=>"120101004",
		'StatName'=>"Ŵ԰",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"·255",
		'Country'=>"ֶ",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.248271",
		'Flag_lo'=>"E",
		'Longitude'=>"121.615476",
		'ProStartTime'=>"2016-04-01",
		'Stage'=>""
	);
	array_push($stat_list,$map4);
	$map5= array(

		'StatCode'=>"120101006",
		'StatName'=>"",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"·346",
		'Country'=>"",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.313004",
		'Flag_lo'=>"E",
		'Longitude'=>"121.525701",
		'ProStartTime'=>"2016-04-13",
		'Stage'=>""
	);
	array_push($stat_list,$map5);
	$map6= array(

		'StatCode'=>"120101007",
		'StatName'=>"´",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"̩ͬ·100",
		'Country'=>"ɽ",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.382624",
		'Flag_lo'=>"E",
		'Longitude'=>"121.501387",
		'ProStartTime'=>"2016-02-01",
		'Stage'=>""

	);
	array_push($stat_list,$map6);
	$map7= array(
		'StatCode'=>"120101008",
		'StatName'=>"Է",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"·3118Ū",
		'Country'=>"",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.101605",
		'Flag_lo'=>"E",
		'Longitude'=>"121.404873",
		'ProStartTime'=>"2016-02-01",
		'Stage'=>""

	);
	array_push($stat_list,$map7);
	$map8= array(
		'StatCode'=>"120101009",
		'StatName'=>"ƻ԰С",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"·5710",
		'Country'=>"",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.043827",
		'Flag_lo'=>"E",
		'Longitude'=>"121.476450",
		'ProStartTime'=>"2016-02-18",
		'Stage'=>""

	);
	array_push($stat_list,$map8);
	$map9= array(
		'StatCode'=>"120101010",
		'StatName'=>"ʻ԰",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"˶·1290",
		'Country'=>"ɽ",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.088973",
		'Flag_lo'=>"E",
		'Longitude'=>"121.295459",
		'ProStartTime'=>"2016-02-18",
		'Stage'=>""

	);
	array_push($stat_list,$map9);
	$map10= array(
		'StatCode'=>"120101011",
		'StatName'=>"Ϲʻ",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"Y095(·)",
		'Country'=>"",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.127234",
		'Flag_lo'=>"E",
		'Longitude'=>"121.062241",
		'ProStartTime'=>"2016-02-18",
		'Stage'=>""
	);
	array_push($stat_list,$map10);
	$map11= array(

		'StatCode'=>"120101012",
		'StatName'=>"ۡ",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"ӯ·1555Ū",
		'Country'=>"",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.164430",
		'Flag_lo'=>"E",
		'Longitude'=>"121.102934",
		'ProStartTime'=>"2016-02-18",
		'Stage'=>""
	);
	array_push($stat_list,$map11);
	$map12= array(

		'StatCode'=>"120101013",
		'StatName'=>"ϼ԰",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"·469Ū",
		'Country'=>"",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.218057",
		'Flag_lo'=>"E",
		'Longitude'=>"121.297076",
		'ProStartTime'=>"2016-02-18",
		'Stage'=>""
	);
	array_push($stat_list,$map12);
	$map13= array(

		'StatCode'=>"120101014",
		'StatName'=>"Ӵ",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"·2000",
		'Country'=>"ֶ",
		'Street'=>"ͷ",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.203650",
		'Flag_lo'=>"E",
		'Longitude'=>"121.526288",
		'ProStartTime'=>"2016-02-18",
		'Stage'=>""

	);
	array_push($stat_list,$map13);
	$map14= array(
		'StatCode'=>"120101015",
		'StatName'=>"",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"հ·189",
		'Country'=>"",
		'Street'=>"·ֵ",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.228283",
		'Flag_lo'=>"E",
		'Longitude'=>"121.485388",
		'ProStartTime'=>"2016-02-29",
		'Stage'=>""

	);
	array_push($stat_list,$map14);
	$map15= array(
		'StatCode'=>"120101017",
		'StatName'=>"Ϻ",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"ر·525",
		'Country'=>"բ",
		'Street'=>"ƽ·ֵ",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.256691",
		'Flag_lo'=>"E",
		'Longitude'=>"121.475583",
		'ProStartTime'=>"2016-03-15",
		'Stage'=>""

	);
	array_push($stat_list,$map15);
	$map16= array(
		'StatCode'=>"120101018",
		'StatName'=>"α",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"·1009",
		'Country'=>"ζ",
		'Street'=>"½",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"31.357885",
		'Flag_lo'=>"E",
		'Longitude'=>"121.256060",
		'ProStartTime'=>"2015-03-19",
		'Stage'=>""

	);
	array_push($stat_list,$map16);
	$map17= array(
		'StatCode'=>"120101019",
		'StatName'=>"ɽͥ",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"嶫·2988",
		'Country'=>"ɽ",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"30.739094",
		'Flag_lo'=>"E",
		'Longitude'=>"121.360693",
		'ProStartTime'=>"2015-08-25",
		'Stage'=>""

	);
	array_push($stat_list,$map17);
	$map18= array(
		'StatCode'=>"120101020",
		'StatName'=>"ٸ۳Ͷ",
		'ChargeMan'=>"",
		'Telephone'=>"13912345678",
		'Department'=>"",
		'Address'=>"һ·333",
		'Country'=>"ֶ",
		'Street'=>"",
		'Square'=>"0",
		'Flag_la'=>"N",
		'Latitude'=>"30.900796",
		'Flag_lo'=>"E",
		'Longitude'=>"121.933166",
		'ProStartTime'=>"2015-11-30",
		'Stage'=>""
	);
	array_push($stat_list,$map18);
	$retval=array(
		'status'=>'true',
		'id'=>$userid,
		'ret'=> $stat_list
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "AlarmQuery":
// query one point one date alarm by minute/hour/day
//require data structure:
/*
var map={
        action:"AlarmQuery",
        id: usr.id,
        StatCode: alarm_selected.StatCode,
        date: date,
        type:type
    };
   //return data structure:
    var minute_alarm = new Array();
                for(var i=0;i<(60*24);i++){
                    minute_alarm.push(GetRandomNum(10,110));
                }
                var hour_alarm = new Array();
                for(var i=0;i<(7*24);i++){
                    hour_alarm.push(GetRandomNum(10,110));
                }
                var day_alarm = new Array();
                for(var i=0;i<30;i++){
                    day_alarm.push(GetRandomNum(10,110));
                }

                var retval={
                    status:"true",
                    StatCode: StatCode,
                    date: date,
                    AlarmName: AlarmName,
                    AlarmUnit: AlarmUnit,
                    WarningTarget:WarningTarget,
                    minute_alarm: minute_alarm,
                    hour_alarm: hour_alarm,
                    day_alarm: day_alarm
                };*/
	$user = $_GET["id"];
	$StatCode = $_GET["StatCode"];
	$query_date = $_GET["date"];
	$query_type = $_GET["type"];
	$AlarmName= "";
	$AlarmUnit="DB";
	$WarningTarget='65';
	$minute_alarm = array();
	for($i=0;$i<(60*24);$i++){
		array_push($minute_alarm,(string)rand(10,110));
	}
	$hour_alarm = array();
	for($i=0;$i<(7*24);$i++){
		array_push($hour_alarm,(string)rand(10,110));
	}
	$day_alarm = array();
	for($i=0;$i<30;$i++){
		array_push($day_alarm,(string)rand(10,110));
	}

	$retval= array(
		'status'=>"true",
		'StatCode'=> $StatCode,
		'date'=> $query_date,
		'AlarmName'=> $AlarmName,
		'AlarmUnit'=> $AlarmUnit,
		'WarningTarget'=>$WarningTarget,
		'minute_alarm'=> $minute_alarm,
		'hour_alarm'=> $hour_alarm,
		'day_alarm'=> $day_alarm
	);
	$jsonencode = json_encode($retval);
	echo $jsonencode; break;
case "AlarmType":
	$ret = array();
	$map = array(
		'id'=>(string)0,
		'name'=>""
	);
	array_push($ret,$map);
	$map = array(
		'id'=>(string)1,
		'name'=>"ﳾ"
	);
	array_push($ret,$map);
	$map = array(
		'id'=>(string)2,
		'name'=>"ʪ"
	);
	array_push($ret,$map);
	$map = array(
		'id'=>(string)3,
		'name'=>"¶"
	);
	array_push($ret,$map);
	$map = array(
		'id'=>(string)4,
		'name'=>"ϸ"
	);
	array_push($ret,$map);
	$map = array(
		'id'=>(string)5,
		'name'=>"ˮ"
	);
	array_push($ret,$map);
	$map = array(
		'id'=>(string)6,
		'name'=>"SO2"
	);
	array_push($ret,$map);
	$map = array(
		'id'=>(string)7,
		'name'=>""
	);
	array_push($ret,$map);
	$retval=array(
		'status'=>'true',
		'typelist'=> $ret
	);
    $jsonencode = json_encode($retval);
	echo $jsonencode; break;
// get all alarm type in system
//require data structure:
/*
var map={
        action:"AlarmType"
    };
//return data structure:
    var map = {
                    id:0,
                    name:""
                }
                ret.push(map);
    ret.push(map);
                var retval={
                    status:"true",
                    typelist: ret
                };*/
	default:
	break;
}


?>